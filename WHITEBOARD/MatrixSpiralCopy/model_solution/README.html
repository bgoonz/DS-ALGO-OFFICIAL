<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>README</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
    <style type="text/css">
      a.sourceLine {
        display: inline-block;
        line-height: 1.25;
      }
      a.sourceLine {
        pointer-events: none;
        color: inherit;
        text-decoration: inherit;
      }
      a.sourceLine:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode {
        white-space: pre;
        position: relative;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        code.sourceCode {
          white-space: pre-wrap;
        }
        a.sourceLine {
          text-indent: -1em;
          padding-left: 1em;
        }
      }
      pre.numberSource a.sourceLine {
        position: relative;
        left: -4em;
      }
      pre.numberSource a.sourceLine::before {
        content: attr(title);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        pointer-events: all;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        a.sourceLine::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
  </head>
  <body>
    <h1 id="matrix-spiral-copy-walkthrough">Matrix Spiral Copy Walkthrough</h1>
    <h2 id="understanding-the-problem">Understanding the Problem</h2>
    <p>
      This problem is asking us to traverse a matrix in spiral order, adding
      each of these elements into a one-dimensional array in that order.
    </p>
    <p>
      Before we consider the spiral order constraint, let’s start by considering
      how we would traverse the matrix in left-to-right, top-to-bottom fashion.
      We’d start off at coordinate [0, 0] in the upper left-hand corner. We’d
      traverse left until we reached the end of the row, then we’d move on to
      the next row, repeating the process of iterating along each column element
      until we reached the end of the row. The code for this idea might look
      something like the following:
    </p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode python"
      ><code class="sourceCode python"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">def</span> matrix_in_order_copy(matrix):</a>
<a class="sourceLine" id="cb1-2" title="2">    <span class="co"># initialize a result array to hold the copied elements</span></a>
<a class="sourceLine" id="cb1-3" title="3">    result <span class="op">=</span> []</a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="co"># outer loop iterates along each row in the matrix</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="cf">for</span> row <span class="kw">in</span> matrix:</a>
<a class="sourceLine" id="cb1-6" title="6">        <span class="co"># inner loop iterates along each element in the row</span></a>
<a class="sourceLine" id="cb1-7" title="7">        <span class="cf">for</span> elem <span class="kw">in</span> row:</a>
<a class="sourceLine" id="cb1-8" title="8">            <span class="co"># add the element to the result array</span></a>
<a class="sourceLine" id="cb1-9" title="9">            result.append(elem)</a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="cf">return</span> result</a></code></pre>
    </div>
    <p>
      Ok, so we can traverse the matrix, but resulting order of the above
      implementation doesn’t achieve the traversal order the problem is looking
      for. We need to figure out how to tailor this idea to print the elements
      in spiral order, which is to say, in clockwise order starting at the top
      left corner and moving from the outer layers inward towards the center.
    </p>
    <h2 id="coming-up-with-a-strategy-for-a-simple-case">
      Coming Up with a Strategy For a Simple Case
    </h2>
    <p>
      Let’s start off with a simple matrix example and think through how we’d
      traverse it in spiral order. Given the following matrix
    </p>
    <pre><code>[
    [1, 2],
    [3, 4]
]</code></pre>
    <p>
      the desired ordering we’re looking for is <code>[1, 2, 4, 3]</code>. One
      thing to notice is that the order in which we’re iterating along the
      elements of the top row is the same order with the in-order traversal
      example. We go from left to right. Once we hit the end of that row, we
      need to start traversing down the column. How do we traverse down a
      column? We do so by keeping the column index (the second index when
      indexing into the matrix) constant and iterating along the rows. Something
      like this:
    </p>
    <div class="sourceCode" id="cb3">
      <pre
        class="sourceCode python"
      ><code class="sourceCode python"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># iterate along a column from top to bottom</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co"># we need to iterate from the index of the top row to the index of the</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co"># bottom row + 1 since the range function is exclusive on the end</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(top_row, bottom_row <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb3-5" title="5">    <span class="co"># only the first index varies as we iterate</span></a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="co"># the column index doesn&#39;t change</span></a>
<a class="sourceLine" id="cb3-7" title="7">    result.append(matrix[i][column_index])</a></code></pre>
    </div>
    <p>
      The above pseudocode will iterate along a matrix column from top to
      bottom. We’ll also need to be able to traverse along columns from bottom
      to top. We can achieve that with a simple change to the above pseudocode:
    </p>
    <div class="sourceCode" id="cb4">
      <pre
        class="sourceCode python"
      ><code class="sourceCode python"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># reverse the result of the `range` iterator function to traverse backwards</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">reversed</span>(<span class="bu">range</span>(top_row, bottom_row <span class="op">+</span> <span class="dv">1</span>)):</a>
<a class="sourceLine" id="cb4-3" title="3">    result.append(matrix[i][column_index])</a></code></pre>
    </div>
    <p>
      Just this simple change has us iterating along columns from bottom to top
      (though we don’t actually need this logic for the simple example). The
      last direction we need to be iterate along is right to left along a row.
      Again, we can do this similarly to how we iterated along columns. Instead
      of keeping the column index constant, we’ll instead keep the row index
      constant such that we’re iterating along column values. The following code
      achieves this:
    </p>
    <div class="sourceCode" id="cb5">
      <pre
        class="sourceCode python"
      ><code class="sourceCode python"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># iterate along the column indices from right to left</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co"># we&#39;ll have to reverse this one too</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">reversed</span>(<span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>)):</a>
<a class="sourceLine" id="cb5-4" title="4">    <span class="co"># vary the column index while keeping the row index constant</span></a>
<a class="sourceLine" id="cb5-5" title="5">    result.append(matrix[row_index][i])</a></code></pre>
    </div>
    <p>
      With all that said and done, we’re able to iterate along our simple
      example matrix in every direction we need to (left-to-right,
      top-to-bottom, then right-to-left). Let’s try to come up with an
      implementation that solves achieves the desired result for our simple
      four-element matrix.
    </p>
    <h2 id="implementing-our-strategy">Implementing our Strategy</h2>
    <p>
      For our simple four-element matrix, we’ll start off in the top left
      corner, traverse right to the end of the row, then start traversing from
      the top of the right column to the bottom, and then finally traverse from
      right to left along the bottom row. Cobbling the code that we’ve come up
      with so far to achieve this, we have:
    </p>
    <div class="sourceCode" id="cb6">
      <pre
        class="sourceCode python"
      ><code class="sourceCode python"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">def</span> matrix_spiral_copy(matrix):</a>
<a class="sourceLine" id="cb6-2" title="2">    result <span class="op">=</span> []</a>
<a class="sourceLine" id="cb6-3" title="3">    <span class="co"># iterate from right to left</span></a>
<a class="sourceLine" id="cb6-4" title="4">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb6-5" title="5">        result.append(matrix[row_index][i])</a>
<a class="sourceLine" id="cb6-6" title="6">    <span class="co"># iterate from top to bottom</span></a>
<a class="sourceLine" id="cb6-7" title="7">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(top_row, bottom_row <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb6-8" title="8">        result.append(matrix[i][column_index])</a>
<a class="sourceLine" id="cb6-9" title="9">    <span class="co"># iterate from right to left</span></a>
<a class="sourceLine" id="cb6-10" title="10">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">reversed</span>(<span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>)):</a>
<a class="sourceLine" id="cb6-11" title="11">        result.append(matrix[row_index][i])</a>
<a class="sourceLine" id="cb6-12" title="12">    <span class="cf">return</span> result</a></code></pre>
    </div>
    <p>
      As of now, this code doesn’t work. We haven’t defined
      <code>left_column</code>, <code>right_column</code>, <code>top_row</code>,
      and <code>bottom_row</code>, as well as <code>row_index</code> and
      <code>column_index</code>. Let’s go ahead and add those variables to our
      implementation:
    </p>
    <div class="sourceCode" id="cb7">
      <pre
        class="sourceCode python"
      ><code class="sourceCode python"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">def</span> matrix_spiral_copy(matrix):</a>
<a class="sourceLine" id="cb7-2" title="2">    result <span class="op">=</span> []</a>
<a class="sourceLine" id="cb7-3" title="3">    <span class="co"># left_column starts off at index 0</span></a>
<a class="sourceLine" id="cb7-4" title="4">    left_column <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-5" title="5">    <span class="co"># right_column is the last column of the matrix</span></a>
<a class="sourceLine" id="cb7-6" title="6">    right_column <span class="op">=</span> <span class="bu">len</span>(matrix[<span class="dv">0</span>]) <span class="op">-</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb7-7" title="7">    <span class="co"># top_row also starts off at index 0</span></a>
<a class="sourceLine" id="cb7-8" title="8">    top_row <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-9" title="9">    <span class="co"># bottom_row is the last row of the matrix</span></a>
<a class="sourceLine" id="cb7-10" title="10">    bottom_row <span class="op">=</span> <span class="bu">len</span>(matrix) <span class="op">-</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb7-11" title="11">    <span class="co"># column_index starts off as column 0</span></a>
<a class="sourceLine" id="cb7-12" title="12">    column_index <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-13" title="13">    <span class="co"># row_index starts off as the right-most row, since that&#39;s the</span></a>
<a class="sourceLine" id="cb7-14" title="14">    <span class="co"># row where we&#39;re going to be iterating from top to bottom</span></a>
<a class="sourceLine" id="cb7-15" title="15">    row_index <span class="op">=</span> <span class="bu">len</span>(matrix[<span class="dv">0</span>]) <span class="op">-</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb7-16" title="16"></a>
<a class="sourceLine" id="cb7-17" title="17">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb7-18" title="18">        result.append(matrix[row_index][i])</a>
<a class="sourceLine" id="cb7-19" title="19">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(top_row, bottom_row <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb7-20" title="20">        result.append(matrix[i][column_index])</a>
<a class="sourceLine" id="cb7-21" title="21">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">reversed</span>(<span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>)):</a>
<a class="sourceLine" id="cb7-22" title="22">        result.append(matrix[row_index][i])</a>
<a class="sourceLine" id="cb7-23" title="23"></a>
<a class="sourceLine" id="cb7-24" title="24">    <span class="cf">return</span> result</a></code></pre>
    </div>
    <p>
      It turns out we can consolidate the <code>column_index</code> and
      <code>row_index</code> variables into the <code>top_row</code> and
      <code>right_column</code> variables respectively. Doing so will yield us
      the following slightly cleaner implementation:
    </p>
    <div class="sourceCode" id="cb8">
      <pre
        class="sourceCode python"
      ><code class="sourceCode python"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">def</span> matrix_spiral_copy(matrix):</a>
<a class="sourceLine" id="cb8-2" title="2">    result <span class="op">=</span> []</a>
<a class="sourceLine" id="cb8-3" title="3">    left_column <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb8-4" title="4">    right_column <span class="op">=</span> <span class="bu">len</span>(matrix[<span class="dv">0</span>]) <span class="op">-</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb8-5" title="5">    top_row <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb8-6" title="6">    bottom_row <span class="op">=</span> <span class="bu">len</span>(matrix) <span class="op">-</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb8-7" title="7"></a>
<a class="sourceLine" id="cb8-8" title="8">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb8-9" title="9">        <span class="co"># append all the elements along the top row</span></a>
<a class="sourceLine" id="cb8-10" title="10">        result.append(matrix[top_row][i])</a>
<a class="sourceLine" id="cb8-11" title="11">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(top_row, bottom_row <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb8-12" title="12">        <span class="co"># append all the elements along the right column</span></a>
<a class="sourceLine" id="cb8-13" title="13">        result.append(matrix[i][right_column])</a>
<a class="sourceLine" id="cb8-14" title="14">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">reversed</span>(<span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>)):</a>
<a class="sourceLine" id="cb8-15" title="15">        <span class="co"># append all the elements along the bottom row</span></a>
<a class="sourceLine" id="cb8-16" title="16">        result.append(matrix[bottom_row][i])</a>
<a class="sourceLine" id="cb8-17" title="17"></a>
<a class="sourceLine" id="cb8-18" title="18">    <span class="cf">return</span> result</a></code></pre>
    </div>
    <p>
      However, if we go ahead and test this implementation out, we’ll see that
      it doesn’t actually work for our simple example. This function returns
      <code>[1, 2, 2, 4]</code>, not the expected answer of
      <code>[1, 2, 4, 3]</code>. Why is this the case?
    </p>
    <p>
      This is happening because our <code>top_row</code> variable stays at 0
      such that we iterate to the end of the top row and then start iterating
      along the left column while the <code>top_row</code> variable is still 0,
      which means we end up printing the last element of the top row, which is
      also the first element of the right column, twice. We can fix this easily
      by incrementing the <code>top_row</code> variable.
    </p>
    <p>
      This in fact ends up being the desirable result when we generalize our
      implementation to work with larger matrices. Once we’ve incremented along
      a row, we don’t need to touch it again, i.e. the new top row will be the
      next row down in the matrix. We’ll want to do the same thing with the
      bottom row and the left and right columns too, i.e., shift them “inwards”
      towards the center of the matrix after we’re done traversing them.
    </p>
    <p>Updating our implementation one more time yields us the following:</p>
    <div class="sourceCode" id="cb9">
      <pre
        class="sourceCode python"
      ><code class="sourceCode python"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">def</span> matrix_spiral_copy(matrix):</a>
<a class="sourceLine" id="cb9-2" title="2">    result <span class="op">=</span> []</a>
<a class="sourceLine" id="cb9-3" title="3">    left_column <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb9-4" title="4">    right_column <span class="op">=</span> <span class="bu">len</span>(matrix[<span class="dv">0</span>]) <span class="op">-</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb9-5" title="5">    top_row <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb9-6" title="6">    bottom_row <span class="op">=</span> <span class="bu">len</span>(matrix) <span class="op">-</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb9-7" title="7"></a>
<a class="sourceLine" id="cb9-8" title="8">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb9-9" title="9">        result.append(matrix[top_row][i])</a>
<a class="sourceLine" id="cb9-10" title="10">    <span class="co"># move the top_row index towards the center of the matrix</span></a>
<a class="sourceLine" id="cb9-11" title="11">    top_row <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb9-12" title="12">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(top_row, bottom_row <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb9-13" title="13">        result.append(matrix[i][right_column])</a>
<a class="sourceLine" id="cb9-14" title="14">    <span class="co"># move the right_column index towards the center of the matrix</span></a>
<a class="sourceLine" id="cb9-15" title="15">    right_column <span class="op">-=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb9-16" title="16"></a>
<a class="sourceLine" id="cb9-17" title="17">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">reversed</span>(<span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>)):</a>
<a class="sourceLine" id="cb9-18" title="18">        result.append(matrix[bottom_row][i])</a>
<a class="sourceLine" id="cb9-19" title="19"></a>
<a class="sourceLine" id="cb9-20" title="20">    <span class="cf">return</span> result</a></code></pre>
    </div>
    <p>The above implementation now works for our simple example!</p>
    <h2 id="generalizing-our-strategy-to-larger-matrices">
      Generalizing our Strategy to Larger Matrices
    </h2>
    <p>
      Ok, now we need to figure out how to be able to handle any matrix. One
      thing we’ll certainly need is to be able to traverse from bottom to top
      along the left-most column, along with having that column index move
      towards the center of the matrix after we’re done with it. Adding that
      logic to what we have is pretty simple:
    </p>
    <div class="sourceCode" id="cb10">
      <pre
        class="sourceCode python"
      ><code class="sourceCode python"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">def</span> matrix_spiral_copy(matrix):</a>
<a class="sourceLine" id="cb10-2" title="2">    result <span class="op">=</span> []</a>
<a class="sourceLine" id="cb10-3" title="3">    left_column <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb10-4" title="4">    right_column <span class="op">=</span> <span class="bu">len</span>(matrix[<span class="dv">0</span>]) <span class="op">-</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb10-5" title="5">    top_row <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb10-6" title="6">    bottom_row <span class="op">=</span> <span class="bu">len</span>(matrix) <span class="op">-</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb10-7" title="7"></a>
<a class="sourceLine" id="cb10-8" title="8">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb10-9" title="9">        result.append(matrix[top_row][i])</a>
<a class="sourceLine" id="cb10-10" title="10">    top_row <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb10-11" title="11">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(top_row, bottom_row <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb10-12" title="12">        result.append(matrix[i][right_column])</a>
<a class="sourceLine" id="cb10-13" title="13">    right_column <span class="op">-=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb10-14" title="14">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">reversed</span>(<span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>)):</a>
<a class="sourceLine" id="cb10-15" title="15">        result.append(matrix[bottom_row][i])</a>
<a class="sourceLine" id="cb10-16" title="16">    <span class="co"># move the bottom_row index towards the center of the matrix</span></a>
<a class="sourceLine" id="cb10-17" title="17">    bottom_row <span class="op">-=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb10-18" title="18">    <span class="co"># iterate from bottom to top along the left column</span></a>
<a class="sourceLine" id="cb10-19" title="19">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">reversed</span>(<span class="bu">range</span>(top_row, bottom_row <span class="op">+</span> <span class="dv">1</span>)):</a>
<a class="sourceLine" id="cb10-20" title="20">        result.append(matrix[i][left_column])</a>
<a class="sourceLine" id="cb10-21" title="21">    left_column <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb10-22" title="22"></a>
<a class="sourceLine" id="cb10-23" title="23">    <span class="cf">return</span> result</a></code></pre>
    </div>
    <p>
      At this point, we’re almost there; there’s just one more crucial piece
      that’s missing. As of now, this code only iterates along the outer layer
      of a matrix. We need to be able to traverse through all the inner layers
      as. How should we go ahead and implement that?
    </p>
    <p>
      The easiest way would probably be to throw all of our traversal logic into
      a while loop. We’ll keep looping until the <code>top_row</code> index
      reaches the <code>bottom_row</code> index and the
      <code>left_column</code> index reaches the
      <code>right_column</code> index:
    </p>
    <div class="sourceCode" id="cb11">
      <pre
        class="sourceCode python"
      ><code class="sourceCode python"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">def</span> matrix_spiral_copy(matrix):</a>
<a class="sourceLine" id="cb11-2" title="2">    result <span class="op">=</span> []</a>
<a class="sourceLine" id="cb11-3" title="3">    left_column <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb11-4" title="4">    right_column <span class="op">=</span> <span class="bu">len</span>(matrix[<span class="dv">0</span>]) <span class="op">-</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb11-5" title="5">    top_row <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb11-6" title="6">    bottom_row <span class="op">=</span> <span class="bu">len</span>(matrix) <span class="op">-</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb11-7" title="7"></a>
<a class="sourceLine" id="cb11-8" title="8">    <span class="cf">while</span> top_row <span class="op">&lt;=</span> bottom_row <span class="kw">and</span> left_column <span class="op">&lt;=</span> right_column:</a>
<a class="sourceLine" id="cb11-9" title="9">        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb11-10" title="10">            result.append(matrix[top_row][i])</a>
<a class="sourceLine" id="cb11-11" title="11">        top_row <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb11-12" title="12">        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(top_row, bottom_row <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb11-13" title="13">            result.append(matrix[i][right_column])</a>
<a class="sourceLine" id="cb11-14" title="14">        right_column <span class="op">-=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb11-15" title="15">        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">reversed</span>(<span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>)):</a>
<a class="sourceLine" id="cb11-16" title="16">            result.append(matrix[bottom_row][i])</a>
<a class="sourceLine" id="cb11-17" title="17">        bottom_row <span class="op">-=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb11-18" title="18">        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">reversed</span>(<span class="bu">range</span>(top_row, bottom_row <span class="op">+</span> <span class="dv">1</span>)):</a>
<a class="sourceLine" id="cb11-19" title="19">            result.append(matrix[i][left_column])</a>
<a class="sourceLine" id="cb11-20" title="20">        left_column <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb11-21" title="21"></a>
<a class="sourceLine" id="cb11-22" title="22">    <span class="cf">return</span> result</a></code></pre>
    </div>
    <p>If we test this implementation on the following matrix</p>
    <pre><code>[&lt;/br&gt;
    [1, 2, 3, 4, 5],&lt;/br&gt;
    [6, 7, 8, 9, 10],&lt;/br&gt;
    [11, 12, 13, 14, 15],&lt;/br&gt;
    [16, 17, 18, 19, 20],&lt;/br&gt;
]</code></pre>
    <p>we’ll see that it returns the expected result!</p>
    <h2 id="improving-our-implementation">Improving our Implementation</h2>
    <p>
      Let’s try a few more test cases to make sure we haven’t missed anything we
      needed to account for. A single element matrix like
      <code>[[1]]</code> works fine. What about a matrix that only contains one
      row? Something like <code>[[1, 2]]</code>. If we try running our
      implementation with this matrix, we get back <code>[1, 2, 1]</code>, which
      definitely isn’t right. What’s the problem here?
    </p>
    <p>
      Our while loop keeps running so long as
      <code>top_row &lt;= bottom_row</code> and
      <code>left_column &lt;= right_column</code>, but these variables are being
      updated within the body of the while loop. So it turns out some of the
      traversal loops within the while loop are running when we actually don’t
      want them to, but the while loop alone isn’t actually able to check this
      since the updates are happening in the middle of an iteration.
    </p>
    <p>
      More specifically, we want to explicitly check that the
      <code>top_row</code> index isn’t out of bounds before we run the for loop
      that traverses from right to left along the bottom row. If we don’t, then
      our code copies elements that it thinks are still within bounds of the
      matrix when we’ve in fact already traversed out of the bounds of the
      matrix. Similarly, we also need to check that the
      <code>left_column</code> index isn’t out of bounds before we run the for
      loop that traverses from bottom to top along the left column for the same
      reason.
    </p>
    <p>Adding those checks to our implementation, we get:</p>
    <div class="sourceCode" id="cb13">
      <pre
        class="sourceCode python"
      ><code class="sourceCode python"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">def</span> matrix_spiral_copy(matrix):</a>
<a class="sourceLine" id="cb13-2" title="2">    result <span class="op">=</span> []</a>
<a class="sourceLine" id="cb13-3" title="3">    left_column <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb13-4" title="4">    right_column <span class="op">=</span> <span class="bu">len</span>(matrix[<span class="dv">0</span>]) <span class="op">-</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb13-5" title="5">    top_row <span class="op">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb13-6" title="6">    bottom_row <span class="op">=</span> <span class="bu">len</span>(matrix) <span class="op">-</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb13-7" title="7"></a>
<a class="sourceLine" id="cb13-8" title="8">    <span class="cf">while</span> top_row <span class="op">&lt;=</span> bottom_row <span class="kw">and</span> left_column <span class="op">&lt;=</span> right_column:</a>
<a class="sourceLine" id="cb13-9" title="9">        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb13-10" title="10">            result.append(matrix[top_row][i])</a>
<a class="sourceLine" id="cb13-11" title="11">        top_row <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb13-12" title="12">        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(top_row, bottom_row <span class="op">+</span> <span class="dv">1</span>):</a>
<a class="sourceLine" id="cb13-13" title="13">            result.append(matrix[i][right_column])</a>
<a class="sourceLine" id="cb13-14" title="14">        right_column <span class="op">-=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb13-15" title="15">        <span class="co"># check if there&#39;s still a top row we need to traverse</span></a>
<a class="sourceLine" id="cb13-16" title="16">        <span class="cf">if</span> top_row <span class="op">&lt;=</span> bottom_row:</a>
<a class="sourceLine" id="cb13-17" title="17">            <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">reversed</span>(<span class="bu">range</span>(left_column, right_column <span class="op">+</span> <span class="dv">1</span>)):</a>
<a class="sourceLine" id="cb13-18" title="18">                result.append(matrix[bottom_row][i])</a>
<a class="sourceLine" id="cb13-19" title="19">            bottom_row <span class="op">-=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb13-20" title="20">        <span class="co"># check if there&#39;s still a left column we need to traverse</span></a>
<a class="sourceLine" id="cb13-21" title="21">        <span class="cf">if</span> left_column <span class="op">&lt;=</span> right_column:</a>
<a class="sourceLine" id="cb13-22" title="22">            <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">reversed</span>(<span class="bu">range</span>(top_row, bottom_row <span class="op">+</span> <span class="dv">1</span>)):</a>
<a class="sourceLine" id="cb13-23" title="23">                result.append(matrix[i][left_column])</a>
<a class="sourceLine" id="cb13-24" title="24">            left_column <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb13-25" title="25"></a>
<a class="sourceLine" id="cb13-26" title="26">    <span class="cf">return</span> result</a></code></pre>
    </div>
    <p>
      This time, when we test this implementation against the input matrix
      <code>[[1, 2]]</code> we get the desired output!
    </p>
    <h2 id="evaluating-our-implementation">Evaluating our Implementation</h2>
    <p>
      The problem asks us to copy all of the elements of the input matrix, so we
      can’t get away from touching every single element in the matrix. So our
      running time is proportional to the total number of elements in the
      matrix, which is given by the height of the matrix _ the width. Hence the
      running time of our algorithm is O(n _ m).
    </p>
    <p>
      For the space complexity, we’re copying every matrix element into another
      array, such that the total amount of extra memory we’re consuming is
      proportional to the total number of matrix elements, so the space
      complexity is also O(n * m). This is fine in this case since the problem
      is specifically asking us to copy the matrix elements into another array.
    </p>
  </body>
</html>
